generator client {
  provider   = "prisma-client-js"
  engineType = "library"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?
  user              User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Admission {
  id           String   @id @default(cuid())
  title        String
  organization String
  link         String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model AdmitCard {
  id           String   @id @default(cuid())
  title        String
  organization String
  link         String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model AnswerKey {
  id           String   @id @default(cuid())
  title        String
  organization String
  link         String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Application {
  id        String   @id @default(cuid())
  userId    String
  jobId     String
  status    String   @default("STARTED")
  steps     Json?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  job       Job      @relation(fields: [jobId], references: [id])
  user      User     @relation(fields: [userId], references: [id])

  @@unique([userId, jobId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model AuditLog {
  id        String   @id @default(cuid())
  userId    String
  action    String
  details   String?
  ipAddress String?
  userAgent String?
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Bookmark {
  id        String   @id @default(cuid())
  userId    String
  jobId     String
  createdAt DateTime @default(now())
  job       Job      @relation(fields: [jobId], references: [id])
  user      User     @relation(fields: [userId], references: [id])

  @@unique([userId, jobId])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Job {
  id                 String        @id @default(cuid())
  title              String
  slug               String        @unique
  organization       String
  department         String?
  logo               String?
  category           String
  vacanciesCount     Int
  vacanciesDetail    Json?
  salaryRange        String?
  location           String?
  shortInfo          String?
  notificationDate   DateTime?
  startDate          DateTime?
  endDate            DateTime
  feeDeadline        DateTime?
  examDate           DateTime?
  admitCardDate      DateTime?
  resultDate         DateTime?
  eligibility        Json?
  applicationProcess Json?
  examPattern        Json?
  syllabus           Json?
  selectionProcess   Json?
  fees               Json?
  isUrgent           Boolean       @default(false)
  isNew              Boolean       @default(true)
  officialUrl        String?
  notificationPdf    String?
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt
  applications       Application[]
  bookmarks          Bookmark[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Profile {
  id            String  @id @default(cuid())
  userId        String  @unique
  age           Int?
  qualification String?
  experience    Int?
  category      String?
  user          User    @relation(fields: [userId], references: [id])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Result {
  id           String   @id @default(cuid())
  title        String
  organization String
  link         String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Syllabus {
  id           String   @id @default(cuid())
  title        String
  organization String
  link         String
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model User {
  id               String        @id @default(cuid())
  name             String?
  email            String?       @unique
  emailVerified    DateTime?
  image            String?
  twoFactorSecret  String?
  twoFactorEnabled Boolean       @default(false)
  accounts         Account[]
  applications     Application[]
  auditLogs        AuditLog[]
  bookmarks        Bookmark[]
  profile          Profile?
  sessions         Session[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}
